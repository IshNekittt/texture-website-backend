# Документация Texture API

Это REST API для управления цифровыми текстурами и их категориями. API предоставляет публичный доступ для чтения данных и защищенный доступ для создания, изменения и удаления данных.

**Базовый URL:** `http://localhost:3000` (для локальной разработки)

## Аутентификация

Для выполнения защищенных действий (создание, обновление, удаление) необходимо передавать секретный ключ в заголовках (headers) каждого запроса. Публичные маршруты для получения данных не требуют аутентификации.

- **Тип:** API Key
- **Имя заголовка:** `X-API-Key`
- **Значение:** Ваш секретный ключ из переменной окружения `API_SECRET_KEY`.

---

## Маршруты (Endpoints)

### Категории (Categories)

#### `GET /categories`

Получает список всех доступных категорий.

- **Доступ:** Публичный
- **Успешный ответ (`200 OK`):** Возвращает массив объектов категорий.

#### `GET /categories/:categoryId`

Получает одну категорию по её уникальному ID.

- **Доступ:** Публичный
- **Успешный ответ (`200 OK`):** Возвращает один объект категории.

#### `POST /categories`

Создает новую категорию.

- **Доступ:** **Защищенный (`X-API-Key` обязателен)**
- **Тело запроса (Body):**
  ```json
  {
    "categoryName": "Новая Категория"
  }
  ```
- **Успешный ответ (`201 Created`):** Возвращает полный объект созданной категории.

#### `PATCH /categories/:categoryId`

Частично обновляет существующую категорию по её ID.

- **Доступ:** **Защищенный (`X-API-Key` обязателен)**
- **Тело запроса (Body):**
  ```json
  {
    "categoryName": "Обновленное название категории"
  }
  ```
- **Успешный ответ (`200 OK`):** Возвращает полный, **уже обновленный** объект категории.

#### `DELETE /categories/:categoryId`

Удаляет категорию по её ID.

- **Доступ:** **Защищенный (`X-API-Key` обязателен)**
- **Успешный ответ (`204 No Content`):** Возвращает пустой ответ.

---

### Текстуры (Textures)

#### `GET /textures`

Получает список всех текстур с поддержкой фильтрации, сортировки и пагинации.

- **Доступ:** Публичный
- **Query-параметры (опционально):**
  - `categoryId` (string): Фильтрует текстуры по ID категории.
  - `page` (number): Номер страницы для пагинации (по умолчанию `1`).
  - `perPage` (number): Количество элементов на странице (по умолчанию `10`).
  - `sortBy` (string): Поле для сортировки (`_id`, `textureName`, `createdAt`).
  - `sortOrder` (string): Порядок сортировки (`asc`, `desc`).

#### `GET /textures/:textureId`

Получает одну текстуру по её уникальному ID.

- **Доступ:** Публичный

#### `POST /textures`

Создает новую текстуру.

- **Доступ:** **Защищенный (`X-API-Key` обязателен)**
- **Тело запроса (Body):**
  ```json
  {
    "textureName": "Моя новая текстура",
    "description": "Подробное описание.",
    "categoryId": "...",
    "imagesUrls": ["http://.../image1.jpg"],
    "fileUrl": "http://.../texture.zip"
  }
  ```

#### `PATCH /textures/:textureId`

Частично обновляет существующую текстуру по её ID.

- **Доступ:** **Защищенный (`X-API-Key` обязателен)**

#### `DELETE /textures/:textureId`

Удаляет текстуру по её ID.

- **Доступ:** **Защищенный (`X-API-Key` обязателен)**

---

## Ответы об ошибках

- **`400 Bad Request`**: Некорректные данные в теле запроса (ошибка валидации) или невалидный формат ID в URL.
- **`401 Unauthorized`**: Отсутствует или неверный `X-API-Key` для защищенных маршрутов.
- **`404 Not Found`**: Ресурс (текстура, категория) не найден, или запрошен несуществующий маршрут.
- **`409 Conflict`**: Попытка создать ресурс с `fileUrl` (для текстур) или `categoryName` (для категорий), который уже существует в базе данных.
- **`500 Internal Server Error`**: Внутренняя ошибка сервера.
