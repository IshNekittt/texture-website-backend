# Документація Texture API

Це REST API для керування цифровими текстурами та їхніми категоріями. API надає публічний доступ для читання даних та захищений доступ для створення, зміни та видалення даних.

**Базовий URL:** `http://localhost:3000` (для локальної розробки)

## Аутентифікація

Для виконання захищених дій (створення, оновлення, видалення) необхідно передавати секретний ключ у заголовках (headers) кожного запиту. Публічні маршрути для отримання даних не вимагають аутентифікації.

- **Тип:** API Key
- **Ім'я заголовка:** `X-API-Key`
- **Значення:** Ваш секретний ключ із змінної оточення `API_SECRET_KEY`.

---

## Маршрути (Endpoints)

### Категорії (Categories)

#### `GET /categories`

Отримує список усіх доступних категорій.

- **Доступ:** Публічний
- **Успішна відповідь (`200 OK`):** Повертає масив об'єктів категорій.

#### `GET /categories/:categoryId`

Отримує одну категорію за її унікальним ID.

- **Доступ:** Публічний
- **Успішна відповідь (`200 OK`):** Повертає один об'єкт категорії.

#### `POST /categories`

Створює нову категорію.

- **Доступ:** **Захищений (`X-API-Key` обов'язковий)**
- **Тіло запиту (Body):**
  ```json
  {
    "categoryName": "Нова Категорія"
  }
  ```
- **Успішна відповідь (`201 Created`):** Повертає повний об'єкт створеної категорії.

#### `PATCH /categories/:categoryId`

Частково оновлює існуючу категорію за її ID.

- **Доступ:** **Захищений (`X-API-Key` обов'язковий)**
- **Тіло запиту (Body):**
  ```json
  {
    "categoryName": "Оновлена назва категорії"
  }
  ```
- **Успішна відповідь (`200 OK`):** Повертає повний, **вже оновлений** об'єкт категорії.

#### `DELETE /categories/:categoryId`

Видаляє категорію за її ID.

- **Доступ:** **Захищений (`X-API-Key` обов'язковий)**
- **Успішна відповідь (`204 No Content`):** Повертає порожню відповідь.

---

### Текстури (Textures)

#### `GET /textures`

Отримує список усіх текстур з підтримкою фільтрації, сортування та пагінації.

- **Доступ:** Публічний
- **Query-параметри (опціонально):**
  - `categoryId` (string): Фільтрує текстури за ID категорії.
  - `page` (number): Номер сторінки для пагінації (за замовчуванням `1`).
  - `perPage` (number): Кількість елементів на сторінці (за замовчуванням `10`).
  - `sortBy` (string): Поле для сортування (`_id`, `textureName`, `createdAt`).
  - `sortOrder` (string): Порядок сортування (`asc`, `desc`).

#### `GET /textures/:textureId`

Отримує одну текстуру за її унікальним ID.

- **Доступ:** Публічний

#### `POST /textures`

Створює нову текстуру.

- **Доступ:** **Захищений (`X-API-Key` обов'язковий)**
- **Тіло запиту (Body):**
  ```json
  {
    "textureName": "Моя нова текстура",
    "description": "Детальний опис.",
    "categoryId": "...",
    "imagesUrls": ["http://.../image1.jpg"],
    "fileUrl": "http://.../texture.zip"
  }
  ```

#### `PATCH /textures/:textureId`

Частково оновлює існуючу текстуру за її ID.

- **Доступ:** **Захищений (`X-API-Key` обов'язковий)**

#### `DELETE /textures/:textureId`

Видаляє текстуру за її ID.

- **Доступ:** **Захищений (`X-API-Key` обов'язковий)**

---

## Відповіді про помилки

- **`400 Bad Request`**: Некоректні дані в тілі запиту (помилка валідації) або невалідний формат ID в URL.
- **`401 Unauthorized`**: Відсутній або невірний `X-API-Key` для захищених маршрутів.
- **`404 Not Found`**: Ресурс (текстура, категорія) не знайдено, або запит на неіснуючий маршрут.
- **`409 Conflict`**: Спроба створити ресурс з `fileUrl` (для текстур) або `categoryName` (для категорій), який вже існує в базі даних.
- **`500 Internal Server Error`**: Внутрішня помилка сервера.
